<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini-Lab Interactiv</title>
  <style>
    :root{
      --bg:#f6f7fb; --card:#fff; --ink:#111827; --muted:#6b7280; --line:#e5e7eb;
      --accent:#111827;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Arial;background:var(--bg);color:var(--ink)}
    header{background:var(--accent);color:#fff;padding:18px 16px}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    h1{margin:0;font-size:20px}
    .sub{margin:6px 0 0;color:#e5e7eb;font-size:13px}
    .grid{display:grid;grid-template-columns:1fr;gap:14px;margin-top:14px}
    @media(min-width:900px){ .grid{grid-template-columns:1.1fr .9fr} }
    .card{background:var(--card);border-radius:16px;box-shadow:0 10px 26px rgba(0,0,0,.08);overflow:hidden}
    .tabs{display:flex;gap:6px;padding:10px;border-bottom:1px solid var(--line);background:#fafafa;flex-wrap:wrap}
    .tab{border:1px solid var(--line);background:#fff;padding:10px 12px;border-radius:999px;cursor:pointer;font-size:13px}
    .tab.active{background:var(--accent);color:#fff;border-color:var(--accent)}
    .pane{padding:14px}
    .row{display:grid;grid-template-columns:1fr;gap:10px;margin:10px 0}
    @media(min-width:700px){ .row{grid-template-columns:1fr 1fr} }
    .field{border:1px solid var(--line);border-radius:14px;padding:12px}
    .label{font-size:13px;color:var(--muted);margin-bottom:8px}
    input[type="range"]{width:100%}
    select{width:100%;padding:10px;border-radius:10px;border:1px solid var(--line);background:#fff}
    .kpi{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    .k{border:1px solid var(--line);border-radius:14px;padding:12px}
    .k .t{font-size:12px;color:var(--muted)}
    .k .v{font-size:18px;font-weight:700;margin-top:4px}
    .note{color:var(--muted);font-size:13px;line-height:1.4}
    .out{border-top:1px solid var(--line);padding:14px;background:#fcfcfd}
    .out h3{margin:0 0 8px;font-size:14px}
    .out p{margin:6px 0;line-height:1.45}
    .pill{display:inline-block;padding:6px 10px;border-radius:999px;background:#eef2ff;border:1px solid #c7d2fe;font-size:12px;margin-right:6px;margin-top:6px}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    button{cursor:pointer;border:0;border-radius:12px;padding:10px 12px;background:var(--accent);color:#fff}
    .ghost{background:#e5e7eb;color:#111827}
    .side h2{margin:0;font-size:16px}
    .side ul{margin:10px 0 0;padding-left:18px;color:var(--muted);line-height:1.5}
    .footer{margin-top:10px;color:var(--muted);font-size:12px}
    a{color:inherit}
  </style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>Mini-Lab Interactiv</h1>
    <div class="sub">Micro-experimente pentru FDM, Ergonomie și Industry 4.0 → 5.0 (educațional, conceptual)</div>
  </div>
</header>

<div class="wrap grid">
  <!-- MAIN -->
  <div class="card">
    <div class="tabs">
      <div class="tab active" data-tab="fdm">FDM • Precizie</div>
      <div class="tab" data-tab="ergo">Ergonomie • Risc</div>
      <div class="tab" data-tab="i45">Industria 4→5 • Echilibru</div>
    </div>

    <!-- FDM -->
    <div class="pane" id="pane-fdm">
      <div class="kpi">
        <div class="k"><div class="t">Scor stabilitate proces</div><div class="v" id="fdm-score">—</div></div>
        <div class="k"><div class="t">Risc de abateri</div><div class="v" id="fdm-risk">—</div></div>
        <div class="k"><div class="t">Recomandare</div><div class="v" id="fdm-rec">—</div></div>
      </div>

      <div class="row">
        <div class="field">
          <div class="label">Înălțime strat (mm)</div>
          <input id="layer" type="range" min="0.10" max="0.30" step="0.01" value="0.20">
          <div class="note"><b id="layer-v"></b> — straturi mai fine: detaliu mai bun, dar timp mai mare.</div>
        </div>
        <div class="field">
          <div class="label">Viteză printare (mm/s)</div>
          <input id="speed" type="range" min="30" max="120" step="5" value="60">
          <div class="note"><b id="speed-v"></b> — viteza mare poate crește vibrația și inconsistența depunerii.</div>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <div class="label">Răcire (fan)</div>
          <select id="cool">
            <option value="high" selected>Ridicată</option>
            <option value="mid">Medie</option>
            <option value="low">Scăzută</option>
          </select>
          <div class="note">Răcire prea mare poate afecta aderența între straturi (în funcție de material).</div>
        </div>
        <div class="field">
          <div class="label">Material (simplificat)</div>
          <select id="mat">
            <option value="pla" selected>PLA</option>
            <option value="petg">PETG</option>
            <option value="abs">ABS</option>
          </select>
          <div class="note">ABS e mai sensibil la contracții / warp; PLA e mai „iertător”.</div>
        </div>
      </div>

      <div class="out">
        <h3>Explicație (conceptual)</h3>
        <p id="fdm-text"></p>
        <div id="fdm-tags"></div>
        <div class="btns">
          <button class="ghost" id="fdm-reset">Reset</button>
          <button id="fdm-example">Setări „echilibrate”</button>
        </div>
      </div>
    </div>

    <!-- ERGO -->
    <div class="pane" id="pane-ergo" style="display:none">
      <div class="kpi">
        <div class="k"><div class="t">Scor risc (0–100)</div><div class="v" id="ergo-score">—</div></div>
        <div class="k"><div class="t">Nivel</div><div class="v" id="ergo-level">—</div></div>
        <div class="k"><div class="t">Prioritate acțiuni</div><div class="v" id="ergo-prio">—</div></div>
      </div>

      <div class="row">
        <div class="field">
          <div class="label">Repetitivitate (cicluri/min)</div>
          <input id="rep" type="range" min="2" max="30" step="1" value="12">
          <div class="note"><b id="rep-v"></b> — repetitivitate mare crește încărcarea cumulativă.</div>
        </div>
        <div class="field">
          <div class="label">Forță percepută</div>
          <select id="force">
            <option value="low">Mică</option>
            <option value="mid" selected>Medie</option>
            <option value="high">Mare</option>
          </select>
          <div class="note">Forța + repetitivitatea cresc riscul musculo-scheletal.</div>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <div class="label">Postură (trunchi/umeri)</div>
          <select id="post">
            <option value="neutral" selected>Neutră</option>
            <option value="bent">Aplecat</option>
            <option value="overhead">Brațe ridicate</option>
          </select>
          <div class="note">Postura nefavorabilă amplifică riscul chiar și la forțe mici.</div>
        </div>
        <div class="field">
          <div class="label">Pauze (min/oră)</div>
          <input id="breaks" type="range" min="0" max="15" step="1" value="5">
          <div class="note"><b id="breaks-v"></b> — micro-pauzele reduc încărcarea cumulativă.</div>
        </div>
      </div>

      <div class="out">
        <h3>Recomandări rapide</h3>
        <p id="ergo-text"></p>
        <div id="ergo-tags"></div>
        <div class="btns">
          <button class="ghost" id="ergo-reset">Reset</button>
          <button id="ergo-example">Scenariu „problematic”</button>
        </div>
      </div>
    </div>

    <!-- I4->I5 -->
    <div class="pane" id="pane-i45" style="display:none">
      <div class="kpi">
        <div class="k"><div class="t">Automatizare</div><div class="v" id="i45-a">—</div></div>
        <div class="k"><div class="t">Centrare pe om</div><div class="v" id="i45-h">—</div></div>
        <div class="k"><div class="t">Echilibru (0–100)</div><div class="v" id="i45-b">—</div></div>
      </div>

      <div class="row">
        <div class="field">
          <div class="label">Nivel digitalizare</div>
          <input id="dig" type="range" min="0" max="100" step="5" value="70">
          <div class="note"><b id="dig-v"></b> — senzori, date, conectivitate, vizibilitate în timp real.</div>
        </div>
        <div class="field">
          <div class="label">Nivel autonomie operator</div>
          <input id="aut" type="range" min="0" max="100" step="5" value="55">
          <div class="note"><b id="aut-v"></b> — decizie locală, competențe, implicare, feedback.</div>
        </div>
      </div>

      <div class="row">
        <div class="field">
          <div class="label">Obiectiv dominant</div>
          <select id="goal">
            <option value="throughput" selected>Productivitate</option>
            <option value="quality">Calitate</option>
            <option value="sustain">Sustenabilitate</option>
            <option value="wellbeing">Bunăstare / ergonomie</option>
          </select>
          <div class="note">Industry 5.0 caută echilibru: productivitate + om + sustenabilitate.</div>
        </div>
        <div class="field">
          <div class="label">Nivel suport AI pentru operator</div>
          <select id="ai">
            <option value="none">Fără</option>
            <option value="assist" selected>Asistență (recomandări)</option>
            <option value="adaptive">Adaptiv (interfață + sarcini)</option>
          </select>
          <div class="note">AI-ul bun nu înlocuiește omul, ci îl amplifică (mai ales în decizie).</div>
        </div>
      </div>

      <div class="out">
        <h3>Interpretare</h3>
        <p id="i45-text"></p>
        <div id="i45-tags"></div>
        <div class="btns">
          <button class="ghost" id="i45-reset">Reset</button>
          <button id="i45-example">Setare „Industry 5.0”</button>
        </div>
      </div>
    </div>

  </div>

  <!-- SIDE -->
  <div class="card side">
    <div class="pane">
      <h2>Cum îl folosim?</h2>
      <ul>
        <li><b>5 minute</b> la început: „Ce parametri cresc riscul / abaterea?”</li>
        <li><b>10 minute</b> în echipe: fiecare echipă caută „setarea optimă” și justifică.</li>
        <li><b>Reflecție</b>: ce variabile sunt controlabile vs. constrângeri reale (timp, cost, calitate).</li>
      </ul>
      <div class="footer">
        SUCCES!
      </div>
    </div>
  </div>
</div>

<script>
  // Helpers
  const clamp = (x, a, b) => Math.max(a, Math.min(b, x));
  const pct = (x) => Math.round(x) + "%";

  // Tabs
  document.querySelectorAll(".tab").forEach(t => {
    t.addEventListener("click", () => {
      document.querySelectorAll(".tab").forEach(x => x.classList.remove("active"));
      t.classList.add("active");
      const tab = t.dataset.tab;
      document.getElementById("pane-fdm").style.display = (tab==="fdm") ? "" : "none";
      document.getElementById("pane-ergo").style.display = (tab==="ergo") ? "" : "none";
      document.getElementById("pane-i45").style.display = (tab==="i45") ? "" : "none";
    });
  });

  // ---------- FDM ----------
  const layer = document.getElementById("layer");
  const speed = document.getElementById("speed");
  const cool = document.getElementById("cool");
  const mat  = document.getElementById("mat");

  function fdmCompute(){
    const L = parseFloat(layer.value);     // 0.10..0.30
    const S = parseFloat(speed.value);     // 30..120
    const C = cool.value;                  // high/mid/low
    const M = mat.value;                   // pla/petg/abs

    document.getElementById("layer-v").textContent = L.toFixed(2);
    document.getElementById("speed-v").textContent = Math.round(S);

    // scor simplificat: stabilitate mai bună cu layer mai mic + viteză moderată + material „iertător”
    let stability = 0;
    // layer: 0.10 best, 0.30 worst
    stability += (0.30 - L) / 0.20 * 40;          // 0..40
    // speed: 30..120 => prefer 45-70
    const speedPenalty = Math.abs(S - 60) / 60;   // 0..1
    stability += (1 - speedPenalty) * 30;         // 0..30

    // cooling effect (heuristic)
    let coolAdj = (C==="mid") ? 8 : (C==="high" ? 5 : 3);
    // material sensitivity
    let matAdj = (M==="pla") ? 20 : (M==="petg" ? 14 : 8);

    stability = clamp(stability + coolAdj + matAdj, 0, 100);

    // risk inverse
    const risk = clamp(100 - stability, 0, 100);

    let rec = "Echilibrat";
    if (risk >= 65) rec = "Atenție";
    else if (risk <= 25) rec = "Stabil";

    document.getElementById("fdm-score").textContent = Math.round(stability);
    document.getElementById("fdm-risk").textContent = Math.round(risk);
    document.getElementById("fdm-rec").textContent = rec;

    // text + tags
    const tags = [];
    if (L <= 0.14) tags.push("strat fin");
    if (L >= 0.26) tags.push("strat gros");
    if (S >= 95) tags.push("viteză mare");
    if (S <= 45) tags.push("viteză mică");
    if (M === "abs") tags.push("sensibil la warp");
    if (C === "high") tags.push("răcire ridicată");

    let text = "Interpretare: ";
    if (risk > 60) {
      text += "setarea are probabilitate mai mare de abateri (vibrații / depunere inconsistentă / contracții). ";
      text += "Încearcă: scade viteza, redu înălțimea stratului sau optimizează răcirea în funcție de material.";
    } else if (risk > 35) {
      text += "setarea este rezonabilă, dar există câteva zone de îmbunătățire. ";
      text += "Țintește viteze moderate și un strat 0.16–0.22 mm pentru un compromis bun.";
    } else {
      text += "setarea este stabilă pentru precizie (conceptual). ";
      text += "Dacă timpul devine critic, crește ușor stratul sau viteza, dar incremental.";
    }
    document.getElementById("fdm-text").textContent = text;

    const tagBox = document.getElementById("fdm-tags");
    tagBox.innerHTML = tags.map(x => `<span class="pill">${x}</span>`).join("");
  }

  document.getElementById("fdm-reset").onclick = () => {
    layer.value = 0.20; speed.value = 60; cool.value = "high"; mat.value="pla"; fdmCompute();
  };
  document.getElementById("fdm-example").onclick = () => {
    layer.value = 0.18; speed.value = 55; cool.value = "mid"; mat.value="petg"; fdmCompute();
  };
  [layer, speed, cool, mat].forEach(el => el.addEventListener("input", fdmCompute));
  fdmCompute();

  // ---------- ERGO ----------
  const rep = document.getElementById("rep");
  const force = document.getElementById("force");
  const post = document.getElementById("post");
  const breaks = document.getElementById("breaks");

  function ergoCompute(){
    const R = parseFloat(rep.value); // 2..30
    const B = parseFloat(breaks.value); // 0..15
    document.getElementById("rep-v").textContent = Math.round(R);
    document.getElementById("breaks-v").textContent = Math.round(B);

    let score = 0;

    // repetitivitate (0..40)
    score += (R - 2) / 28 * 40;

    // forță (0..30)
    score += (force.value==="low") ? 8 : (force.value==="mid" ? 18 : 30);

    // postură (0..25)
    score += (post.value==="neutral") ? 6 : (post.value==="bent" ? 16 : 25);

    // pauze reduc (0..20)
    score -= (B / 15) * 20;

    score = clamp(score, 0, 100);

    let level = "Scăzut";
    let prio = "Monitorizare";
    if (score >= 70) { level = "Ridicat"; prio = "Intervenție rapidă"; }
    else if (score >= 45) { level = "Mediu"; prio = "Îmbunătățiri țintite"; }

    document.getElementById("ergo-score").textContent = Math.round(score);
    document.getElementById("ergo-level").textContent = level;
    document.getElementById("ergo-prio").textContent = prio;

    const tags = [];
    if (R >= 20) tags.push("repetitivitate mare");
    if (force.value==="high") tags.push("forță mare");
    if (post.value!=="neutral") tags.push("postură nefavorabilă");
    if (B >= 10) tags.push("pauze bune");

    let text = "";
    if (score >= 70) {
      text = "Recomandări: reduce repetitivitatea (rotație post), scade forța (ajutor mecanic), optimizează postura (înălțime, distanțe), introdu micro-pauze.";
    } else if (score >= 45) {
      text = "Recomandări: ajustează postura și secvența sarcinii; micro-pauze mai dese; verifică dacă forța poate fi redusă prin dispozitiv / sculă.";
    } else {
      text = "Situație relativ bună. Menține postura neutră, monitorizează repetitivitatea și asigură micro-pauze constante.";
    }

    document.getElementById("ergo-text").textContent = text;
    document.getElementById("ergo-tags").innerHTML = tags.map(x => `<span class="pill">${x}</span>`).join("");
  }

  document.getElementById("ergo-reset").onclick = () => {
    rep.value = 12; force.value="mid"; post.value="neutral"; breaks.value=5; ergoCompute();
  };
  document.getElementById("ergo-example").onclick = () => {
    rep.value = 26; force.value="high"; post.value="bent"; breaks.value=1; ergoCompute();
  };
  [rep, force, post, breaks].forEach(el => el.addEventListener("input", ergoCompute));
  ergoCompute();

  // ---------- I4->I5 ----------
  const dig = document.getElementById("dig");
  const aut = document.getElementById("aut");
  const goal = document.getElementById("goal");
  const ai = document.getElementById("ai");

  function i45Compute(){
    const D = parseFloat(dig.value);
    const A = parseFloat(aut.value);
    document.getElementById("dig-v").textContent = Math.round(D);
    document.getElementById("aut-v").textContent = Math.round(A);

    // interpretări: automatizare ~ digitalizare, human-centric ~ autonomie + AI assist/adaptive
    let auto = clamp(D, 0, 100);
    let human = clamp(A + (ai.value==="assist" ? 10 : (ai.value==="adaptive" ? 18 : 0)), 0, 100);

    // echilibru: penalizează extremele
    const balance = clamp(100 - Math.abs(auto - human), 0, 100);

    document.getElementById("i45-a").textContent = pct(auto);
    document.getElementById("i45-h").textContent = pct(human);
    document.getElementById("i45-b").textContent = Math.round(balance);

    const tags = [];
    tags.push(goal.value==="throughput" ? "focus productivitate" :
              goal.value==="quality" ? "focus calitate" :
              goal.value==="sustain" ? "focus sustenabilitate" : "focus bunăstare");

    if (ai.value==="adaptive") tags.push("AI adaptiv");
    if (balance >= 75) tags.push("echilibru bun");
    if (balance <= 45) tags.push("dezechilibru");

    let text = "Interpretare: ";
    if (balance >= 75) {
      text += "configurație apropiată de o viziune Industry 5.0: digitalizarea susține decizia, iar operatorul păstrează control și sens.";
    } else if (balance >= 50) {
      text += "configurație acceptabilă, dar ai un ușor dezechilibru. Dacă automatizarea e mult peste autonomie, riști alienare; invers, riști lipsă de standardizare.";
    } else {
      text += "dezechilibru pronunțat: aliniază digitalizarea cu autonomie și suport AI orientat spre operator (nu doar spre KPI-uri).";
    }

    document.getElementById("i45-text").textContent = text;
    document.getElementById("i45-tags").innerHTML = tags.map(x => `<span class="pill">${x}</span>`).join("");
  }

  document.getElementById("i45-reset").onclick = () => {
    dig.value=70; aut.value=55; goal.value="throughput"; ai.value="assist"; i45Compute();
  };
  document.getElementById("i45-example").onclick = () => {
    dig.value=75; aut.value=75; goal.value="sustain"; ai.value="adaptive"; i45Compute();
  };
  [dig, aut, goal, ai].forEach(el => el.addEventListener("input", i45Compute));
  i45Compute();
</script>
</body>
</html>
